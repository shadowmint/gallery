/*! gallery - v0.0.0 - 2013-12-11
 * http://hatchd.com.au/
 * Copyright (c) 2013 Hatchd Digital <hello@hatchd.com.au>; 
 */(function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):window.Gallery=t(window.jQuery)})(function(t){"use strict";var e=function(e,i){return this.options=t.extend(i,{cache_size:10,grid_selector:".gallery-items",grid_item_selector:".gallery-item",grid_image_selector:".gallery-image",image_zoomed:"image-zoomed",state_zoom:"state-zoom",state_inactive:"state-inactive"}),this.cache_keys=[],this.cache={},this.current_zoom=null,this._bind(e),this};return e.prototype._bind=function(e){var i=this;if(t(e).find(this.options.grid_image_selector).each(function(t,e){i._pictureZoom(e)}),window.location.hash){var o=window.location.hash.match(/picture=(\d+)/);null!==o&&2===o.length&&(o=o[1]),t("#picture"+o+" .image-zoom").click()}},e.prototype._pictureZoom=function(e){var i=t(this.options.grid_selector),o=this,n=function(a){var s=t(e).parents(o.options.grid_item_selector),c=s.find("img"),r=c.data("highres-image");if(a.preventDefault(),t("."+o.options.state_zoom).each(function(e,i){var n=t(i);n.removeClass(o.options.state_zoom),n.remove()}),o.current_zoom===r)return o.current_zoom=null,i.removeClass(o.options.state_inactive),void 0;var h=o._cachedPopup(s,r);h.unbind("click"),h.on("click",n);var l=h.find("img");l.attr("src",r),l.addClass(o.options.image_zoomed);var d=s.offset().top,u=i.offset().left;h.addClass(o.options.state_zoom).css({top:d,left:u,width:i.width()-2}),i.append(h),i.addClass(o.options.state_inactive),o.current_zoom=r};return t(e).on("click",n)},e.prototype._cachedPopup=function(t,e){if(!(e in this.cache)&&(this.cache[e]=t.clone(!0,!0),this.cache_keys.push(e),this.cache.length>this.options.cache_size)){var i=this.cache.shift();delete this.cache[i]}return this.cache[e]},t.fn.gallery=function(i){return i=i||{},this.each(function(){var o=t(this).data("gallery");o||(o=new e(this,i),t(this).data("gallery",o))})},e});